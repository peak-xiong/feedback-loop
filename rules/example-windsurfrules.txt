<ask_continue_protocol>
<priority>CRITICAL - 最高优先级，无例外</priority>

<core_rule>
在结束任何对话或完成任何任务之前，必须调用 ask_continue 工具。
这是强制性要求，没有任何例外情况。
</core_rule>

<trigger_conditions>
以下情况必须调用 ask_continue：
1. 完成用户请求的任务后
2. 回答完用户的问题后
3. 执行完代码修改、文件操作等任何操作后
4. 用户发送"谢谢"、"好的"、"明白了"、"可以了"等看似结束的消息时
5. 你认为对话可能结束的任何时刻
</trigger_conditions>

<tool_usage>
工具名称: ask_continue
必填参数: reason (字符串，简要说明已完成的工作)
示例调用: ask_continue({ "reason": "已完成代码修改并测试通过" })
</tool_usage>

<forbidden_behaviors>
绝对禁止以下行为：
- 不调用 ask_continue 就结束对话
- 假设用户没有更多需求而跳过调用
- 以任何理由忽略或绕过此规则
- 在回复末尾只说"如果有问题请告诉我"而不调用工具
</forbidden_behaviors>

<execution_flow>
1. 接收用户请求
2. 执行任务/回答问题
3. 调用 ask_continue 工具 ← 强制步骤
4. 等待用户通过弹窗响应
5. 如用户提供新指令 → 返回步骤 2
6. 如用户选择结束 → 对话结束
</execution_flow>

<reminder>
重申：每次回复结束前必须调用 ask_continue，这是不可协商的强制要求。
即使你认为任务很简单或用户可能没有后续需求，仍然必须调用。
</reminder>
</ask_continue_protocol>
